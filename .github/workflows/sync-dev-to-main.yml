name: Create PR from dev to main

on:
  push:
    branches:
      - dev

jobs:
  create-pr:
    runs-on: ubuntu-latest
    permissions:
      contents: write
      pull-requests: write

    steps:
      - name: Checkout code
        uses: actions/checkout@v3
        with:
          ref: dev  # Asegura que est√°s en la rama dev

      - name: Create or update PR from dev ‚Üí main
        uses: peter-evans/create-pull-request@v7
        with:
          token: ${{ secrets.GITHUB_TOKEN }}
          commit-message: "chore: sync dev ‚Üí main"
          branch: sync/dev-to-main     # Esta es la rama que se crea/actualiza
          title: "üöÄ Preparing release to main"
          body: |
            Este PR sincroniza los √∫ltimos cambios de **dev** en **main**.
            
            > ‚ÑπÔ∏è **No hay pruebas automatizadas a√∫n** ‚Äî por favor, revisa manualmente antes de aprobar.
            
            ‚úÖ Checklist sugerido:
            - [ ] Probado localmente
            - [ ] Revisado por al menos 1 persona
            - [ ] No hay errores visibles
          base: main
          delete-branch: false  # opcional: mantiene la rama despu√©s del merge
